!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/material/form-field"),require("@angular/material/select"),require("@angular/common"),require("@angular/material/button"),require("@angular/material/icon"),require("@angular/material/checkbox"),require("@angular/material/core")):"function"==typeof define&&define.amd?define("mat-select-autocomplete",["exports","@angular/core","@angular/forms","@angular/material/form-field","@angular/material/select","@angular/common","@angular/material/button","@angular/material/icon","@angular/material/checkbox","@angular/material/core"],t):t((e=e||self)["mat-select-autocomplete"]={},e.ng.core,e.ng.forms,e.ng.material.formField,e.ng.material.select,e.ng.common,e.ng.material.button,e.ng.material.icon,e.ng.material.checkbox,e.ng.material.core)}(this,(function(e,t,n,l,o,i,r,a,s,c){"use strict";var u=function(){function e(){}return e.ɵfac=function(t){return new(t||e)},e.ɵprov=t["ɵɵdefineInjectable"]({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),d=["selectElem"];function p(e,n){if(1&e){var l=t["ɵɵgetCurrentView"]();t["ɵɵelementStart"](0,"mat-checkbox",12),t["ɵɵlistener"]("ngModelChange",(function(e){return t["ɵɵrestoreView"](l),t["ɵɵnextContext"]().selectAllChecked=e}))("change",(function(e){return t["ɵɵrestoreView"](l),t["ɵɵnextContext"]().toggleSelectAll(e)})),t["ɵɵelementEnd"]()}if(2&e){var o=t["ɵɵnextContext"]();t["ɵɵproperty"]("ngModel",o.selectAllChecked)}}function h(e,n){if(1&e&&(t["ɵɵelementStart"](0,"mat-option",13),t["ɵɵtext"](1),t["ɵɵelementEnd"]()),2&e){var l=n.$implicit,o=t["ɵɵnextContext"]();t["ɵɵstyleProp"]("display",o.hideOption(l)?"none":"flex"),t["ɵɵproperty"]("disabled",l.disabled)("value",l[o.value]),t["ɵɵadvance"](1),t["ɵɵtextInterpolate1"]("",l[o.display]," ")}}function g(e,n){if(1&e&&(t["ɵɵelementStart"](0,"mat-hint",14),t["ɵɵtext"](1),t["ɵɵelementEnd"]()),2&e){var l=t["ɵɵnextContext"]();t["ɵɵadvance"](1),t["ɵɵtextInterpolate"](l.errorMsg)}}var m=function(e){return{"pl-1":e}},f=function(){function e(){this.selectPlaceholder="search...",this.disabled=!1,this.display="display",this.value="value",this.formControl=new n.FormControl,this.errorMsg="Field is required",this.showErrorMsg=!1,this.multiple=!0,this.labelCount=1,this.appearance="standard",this.disableOptionCentering=!1,this.selectionChange=new t.EventEmitter,this.filteredOptions=[],this.selectedValue=[],this.selectAllChecked=!1,this.displayString=""}return e.prototype.ngOnChanges=function(){this.disabled?this.formControl.disable():this.formControl.enable(),this.filteredOptions=this.options,this.selectedOptions?this.selectedValue=this.selectedOptions:this.formControl.value&&(this.selectedValue=this.formControl.value)},e.prototype.ngDoCheck=function(){this.selectedValue.length||this.selectionChange.emit(this.selectedValue)},e.prototype.toggleDropdown=function(){this.selectElem.toggle()},e.prototype.toggleSelectAll=function(e){var t=this;if(e.checked)this.filteredOptions.forEach((function(e){t.selectedValue.includes(e[t.value])||(t.selectedValue=t.selectedValue.concat([e[t.value]]))}));else{var n=this.getFilteredOptionsValues();this.selectedValue=this.selectedValue.filter((function(e){return!n.includes(e)}))}this.selectionChange.emit(this.selectedValue)},e.prototype.filterItem=function(e){var t=this;this.filteredOptions=this.options.filter((function(n){return n[t.display].toLowerCase().localeCompare(e.toLowerCase())>-1})),this.selectAllChecked=!0,this.filteredOptions.forEach((function(e){t.multiple&&!t.selectedValue.includes(e[t.value])&&(t.selectAllChecked=!1)})),this.filteredOptions.length||(this.selectAllChecked=!1)},e.prototype.hideOption=function(e){return!(this.filteredOptions.indexOf(e)>-1)},e.prototype.getFilteredOptionsValues=function(){var e=[];return this.filteredOptions.forEach((function(t){e.push(t.value)})),e},e.prototype.onDisplayString=function(){var e=this;if(this.displayString="",this.selectedValue){var t=[];if(this.multiple){for(var n=function(n){t[n]=l.options.filter((function(t){return t[e.value]===e.selectedValue[n]}))[0]},l=this,o=0;o<this.labelCount;o++)n(o);if(t.length){for(o=0;o<t.length;o++)t[o]&&t[o][this.display]&&(this.displayString+=t[o][this.display]+",");this.displayString=this.displayString.slice(0,-1),this.selectedValue.length>1&&this.selectedValue.length>this.labelCount&&(this.displayString=(this.displayString.length>45?this.displayString.substr(0,44)+"...":this.displayString)+" (y "+(this.selectedValue.length-this.labelCount)+" más)")}}else(t=this.options.filter((function(t){return t[e.value]===e.selectedValue}))).length&&(this.displayString=t[0][this.display])}return this.displayString},e.prototype.onSelectionChange=function(e){var t=this.getFilteredOptionsValues(),n=0;this.multiple&&(this.selectedValue.filter((function(e){t.includes(e)&&n++})),this.selectAllChecked=n===this.filteredOptions.length),this.selectedValue=e.value,this.selectionChange.emit(this.selectedValue)},e.prototype.trackByFn=function(e,t){return t.value},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=t["ɵɵdefineComponent"]({type:e,selectors:[["mat-select-autocomplete"]],viewQuery:function(e,n){var l;(1&e&&t["ɵɵstaticViewQuery"](d,!0),2&e)&&(t["ɵɵqueryRefresh"](l=t["ɵɵloadQuery"]())&&(n.selectElem=l.first))},inputs:{selectPlaceholder:"selectPlaceholder",placeholder:"placeholder",options:"options",disabled:"disabled",display:"display",value:"value",formControl:"formControl",errorMsg:"errorMsg",showErrorMsg:"showErrorMsg",selectedOptions:"selectedOptions",multiple:"multiple",labelCount:"labelCount",appearance:"appearance",disableOptionCentering:"disableOptionCentering"},outputs:{selectionChange:"selectionChange"},features:[t["ɵɵNgOnChangesFeature"]],decls:15,vars:14,consts:[[3,"appearance"],["disableOptionCentering","disableOptionCentering",3,"placeholder","formControl","multiple","ngModel","ngModelChange","selectionChange"],["selectElem",""],[1,"box-search"],["color","primary","class","box-select-all",3,"ngModel","ngModelChange","change",4,"ngIf"],["type","text",3,"ngClass","placeholder","input"],["searchInput",""],[1,"box-search-icon",3,"click"],["mat-icon-button","",1,"search-button"],["aria-label","Search icon",1,"mat-24"],[3,"disabled","value","display",4,"ngFor","ngForOf","ngForTrackBy"],["style","color:red",4,"ngIf"],["color","primary",1,"box-select-all",3,"ngModel","ngModelChange","change"],[3,"disabled","value"],[2,"color","red"]],template:function(e,n){if(1&e){var l=t["ɵɵgetCurrentView"]();t["ɵɵelementStart"](0,"mat-form-field",0),t["ɵɵelementStart"](1,"mat-select",1,2),t["ɵɵlistener"]("ngModelChange",(function(e){return n.selectedValue=e}))("selectionChange",(function(e){return n.onSelectionChange(e)})),t["ɵɵelementStart"](3,"div",3),t["ɵɵtemplate"](4,p,1,1,"mat-checkbox",4),t["ɵɵelementStart"](5,"input",5,6),t["ɵɵlistener"]("input",(function(){t["ɵɵrestoreView"](l);var e=t["ɵɵreference"](6);return n.filterItem(e.value)})),t["ɵɵelementEnd"](),t["ɵɵelementStart"](7,"div",7),t["ɵɵlistener"]("click",(function(){t["ɵɵrestoreView"](l);var e=t["ɵɵreference"](6);return n.filterItem(""),e.value=""})),t["ɵɵelementStart"](8,"button",8),t["ɵɵelementStart"](9,"mat-icon",9),t["ɵɵtext"](10,"clear"),t["ɵɵelementEnd"](),t["ɵɵelementEnd"](),t["ɵɵelementEnd"](),t["ɵɵelementEnd"](),t["ɵɵelementStart"](11,"mat-select-trigger"),t["ɵɵtext"](12),t["ɵɵelementEnd"](),t["ɵɵtemplate"](13,h,2,5,"mat-option",10),t["ɵɵelementEnd"](),t["ɵɵtemplate"](14,g,2,1,"mat-hint",11),t["ɵɵelementEnd"]()}2&e&&(t["ɵɵpropertyInterpolate"]("appearance",n.appearance),t["ɵɵadvance"](1),t["ɵɵproperty"]("placeholder",n.placeholder)("formControl",n.formControl)("multiple",n.multiple)("ngModel",n.selectedValue),t["ɵɵadvance"](3),t["ɵɵproperty"]("ngIf",n.multiple),t["ɵɵadvance"](1),t["ɵɵproperty"]("ngClass",t["ɵɵpureFunction1"](12,m,!n.multiple))("placeholder",n.selectPlaceholder),t["ɵɵadvance"](7),t["ɵɵtextInterpolate1"](" ",n.onDisplayString()," "),t["ɵɵadvance"](1),t["ɵɵproperty"]("ngForOf",n.options)("ngForTrackBy",n.trackByFn),t["ɵɵadvance"](1),t["ɵɵproperty"]("ngIf",n.showErrorMsg))},directives:[l.MatFormField,o.MatSelect,n.NgControlStatus,n.FormControlDirective,i.NgIf,i.NgClass,r.MatButton,a.MatIcon,o.MatSelectTrigger,i.NgForOf,s.MatCheckbox,n.NgModel,c.MatOption,l.MatHint],styles:[".box-search[_ngcontent-%COMP%] {\n        margin: 8px;\n        border-radius: 2px;\n        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.16),\n          0 0 0 1px rgba(0, 0, 0, 0.08);\n        transition: box-shadow 200ms cubic-bezier(0.4, 0, 0.2, 1);\n        display: flex;\n      }\n      .box-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\n        flex: 1;\n        border: none;\n        outline: none;\n      }\n      .box-select-all[_ngcontent-%COMP%] {\n        width: 36px;\n        line-height: 33px;\n        color: #808080;\n        text-align: center;\n      }\n      .search-button[_ngcontent-%COMP%] {\n        width: 36px;\n        height: 36px;\n        line-height: 33px;\n        color: #808080;\n      }\n      .pl-1[_ngcontent-%COMP%] {\n        padding-left: 1rem;\n      }"]}),e}(),C=function(){function e(){}return e.ɵmod=t["ɵɵdefineNgModule"]({type:e}),e.ɵinj=t["ɵɵdefineInjector"]({factory:function(t){return new(t||e)},imports:[[n.FormsModule,i.CommonModule,a.MatIconModule,r.MatButtonModule,o.MatSelectModule,s.MatCheckboxModule,l.MatFormFieldModule,n.ReactiveFormsModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t["ɵɵsetNgModuleScope"](C,{declarations:[f],imports:[n.FormsModule,i.CommonModule,a.MatIconModule,r.MatButtonModule,o.MatSelectModule,s.MatCheckboxModule,l.MatFormFieldModule,n.ReactiveFormsModule],exports:[f]}),e.SelectAutocompleteComponent=f,e.SelectAutocompleteModule=C,e.SelectAutocompleteService=u,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=mat-select-autocomplete.umd.min.js.map